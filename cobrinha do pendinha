<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Cobrinha Pendinha</title>

<style>
html, body {
  margin: 0;
  padding: 0;
  background: #0b1d13;
  font-family: Arial, Helvetica, sans-serif;
}

#gameContainer {
  position: relative;
  max-width: 520px;
  margin: 20px auto;
}

canvas {
  width: 100%;
  height: auto;
  background: linear-gradient(#1e3d2b, #0b1d13);
  border-radius: 14px;
  display: block;
}

/* UI */
#ui {
  position: absolute;
  top: 10px;
  left: 10px;
  color: white;
  font-size: 16px;
}

#menu {
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  color: white;
  background: rgba(0,0,0,0.6);
}

.colorPicker {
  display: flex;
  gap: 8px;
  margin: 10px 0;
}

.color {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  cursor: pointer;
  border: 2px solid #fff;
}
</style>
</head>

<body>

<div id="gameContainer">
  <canvas id="game" width="360" height="520"></canvas>

  <div id="ui">
    Pontos: <span id="score">0</span>
  </div>

  <div id="menu">
    <h2>üêç Cobrinha Pendinha</h2>
    <p>Escolha a cor da cobra</p>

    <div class="colorPicker" id="colors"></div>

    <p>(Clique para come√ßar)</p>
  </div>
</div>

<script>
/* ============================================================
   ====================== CONFIGURA√á√ïES =======================
   ============================================================ */

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const W = canvas.width;
const H = canvas.height;

const COLORS = [
  "#4caf50", "#ff5722", "#2196f3", "#e91e63", "#9c27b0",
  "#ffeb3b", "#00bcd4", "#8bc34a", "#ff9800", "#795548"
];

let selectedColor = COLORS[0];

const snake = {
  x: W / 2,
  y: H / 2,
  length: 12,
  angle: 0,
  speed: 2.2,
  body: [],
  eyeBlink: 0,
  tongue: 0
};

let food = {};
let score = 0;
let running = false;
let bgOffset = 0;

/* ============================================================
   ====================== MENU CORES ==========================
   ============================================================ */

const colorsDiv = document.getElementById("colors");

COLORS.forEach(color => {
  const div = document.createElement("div");
  div.className = "color";
  div.style.background = color;
  div.onclick = () => selectedColor = color;
  colorsDiv.appendChild(div);
});

/* ============================================================
   ====================== INPUT ===============================
   ============================================================ */

canvas.addEventListener("mousemove", e => {
  if (!running) return;

  const rect = canvas.getBoundingClientRect();
  const mx = (e.clientX - rect.left) * (W / canvas.clientWidth);
  const my = (e.clientY - rect.top) * (H / canvas.clientHeight);

  snake.angle = Math.atan2(my - snake.y, mx - snake.x);
});

canvas.addEventListener("click", () => {
  if (!running) {
    startGame();
  }
});

/* ============================================================
   ====================== INICIAR =============================
   ============================================================ */

function startGame() {
  document.getElementById("menu").style.display = "none";
  snake.body = [];
  snake.x = W / 2;
  snake.y = H / 2;
  snake.length = 12;
  score = 0;
  spawnFood();
  running = true;
}

/* ============================================================
   ====================== COMIDA ==============================
   ============================================================ */

function spawnFood() {
  food = {
    x: Math.random() * (W - 40) + 20,
    y: Math.random() * (H - 40) + 20,
    angle: Math.random() * Math.PI * 2,
    speed: 1.4
  };
}

/* ============================================================
   ====================== UPDATE ==============================
   ============================================================ */

function update() {
  if (!running) return;

  // Fundo animado
  bgOffset += 0.3;

  // Cobra
  snake.x += Math.cos(snake.angle) * snake.speed;
  snake.y += Math.sin(snake.angle) * snake.speed;

  // Corpo
  snake.body.unshift({ x: snake.x, y: snake.y });
  if (snake.body.length > snake.length) {
    snake.body.pop();
  }

  // Olhos piscando
  snake.eyeBlink += 1;
  if (snake.eyeBlink > 200) snake.eyeBlink = 0;

  // L√≠ngua
  snake.tongue += 0.15;

  // Comida foge
  food.angle += (Math.random() - 0.5) * 0.2;
  food.x += Math.cos(food.angle) * food.speed;
  food.y += Math.sin(food.angle) * food.speed;

  // Limites
  food.x = Math.max(20, Math.min(W - 20, food.x));
  food.y = Math.max(20, Math.min(H - 20, food.y));

  // Colis√£o
  const dx = snake.x - food.x;
  const dy = snake.y - food.y;
  if (Math.hypot(dx, dy) < 16) {
    snake.length += 4;
    score++;
    document.getElementById("score").textContent = score;
    spawnFood();
  }
}

/* ============================================================
   ====================== DESENHO =============================
   ============================================================ */

function drawBackground() {
  ctx.fillStyle = "#102e1c";
  ctx.fillRect(0, 0, W, H);

  ctx.fillStyle = "rgba(255,255,255,0.05)";
  for (let i = 0; i < 20; i++) {
    ctx.beginPath();
    ctx.arc(
      (i * 40 + bgOffset) % W,
      (i * 30) % H,
      20,
      0,
      Math.PI * 2
    );
    ctx.fill();
  }
}

function drawSnake() {
  ctx.fillStyle = selectedColor;

  snake.body.forEach((p, i) => {
    ctx.beginPath();
    ctx.arc(p.x, p.y, 8 - i * 0.02, 0, Math.PI * 2);
    ctx.fill();
  });

  // Cabe√ßa
  ctx.beginPath();
  ctx.arc(snake.x, snake.y, 10, 0, Math.PI * 2);
  ctx.fill();

  // Olhos
  if (snake.eyeBlink < 180) {
    ctx.fillStyle = "#000";
    ctx.beginPath();
    ctx.arc(
      snake.x + Math.cos(snake.angle + 0.5) * 5,
      snake.y + Math.sin(snake.angle + 0.5) * 5,
      2, 0, Math.PI * 2
    );
    ctx.arc(
      snake.x + Math.cos(snake.angle - 0.5) * 5,
      snake.y + Math.sin(snake.angle - 0.5) * 5,
      2, 0, Math.PI * 2
    );
    ctx.fill();
  }

  // L√≠ngua
  ctx.strokeStyle = "#ff1744";
  ctx.beginPath();
  ctx.moveTo(snake.x, snake.y);
  ctx.lineTo(
    snake.x + Math.cos(snake.angle) * (10 + Math.sin(snake.tongue) * 6),
    snake.y + Math.sin(snake.angle) * (10 + Math.sin(snake.tongue) * 6)
  );
  ctx.stroke();
}

function drawFood() {
  ctx.fillStyle = "#ffeb3b";
  ctx.beginPath();
  ctx.arc(food.x, food.y, 6, 0, Math.PI * 2);
  ctx.fill();
}

/* ============================================================
   ====================== LOOP ================================
   ============================================================ */

function loop() {
  update();
  drawBackground();
  drawFood();
  drawSnake();
  requestAnimationFrame(loop);
}

loop();
</script>
</body>
</html>
