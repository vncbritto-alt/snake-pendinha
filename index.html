<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Pendinha Boss Shooter</title>

<style>
* { box-sizing: border-box; }

html, body {
  margin: 0;
  padding: 0;
  background: #000;
  overflow: hidden;
  font-family: Arial, Helvetica, sans-serif;
  color: #fff;
}

#gameContainer {
  position: relative;
  max-width: 420px;
  margin: auto;
}

canvas {
  width: 100%;
  display: block;
  background: #000;
}

#ui {
  position: absolute;
  top: 10px;
  left: 10px;
  font-size: 14px;
  z-index: 10;
}

#menu {
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.85);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}

#menu button {
  padding: 10px 26px;
  font-size: 16px;
  background: #00e5ff;
  border: none;
  cursor: pointer;
}
</style>
</head>

<body>

<div id="gameContainer">
  <canvas id="game" width="360" height="520"></canvas>

  <div id="ui">
    Fase: <span id="phase">1</span><br>
    Score: <span id="score">0</span>
  </div>

  <div id="menu">
    <h1>ðŸ‘¾ Pendinha Boss Shooter</h1>
    <button id="startBtn">â–¶ Iniciar</button>
  </div>
</div>

<script>
/* ========================= SETUP ========================= */

const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const W = canvas.width;
const H = canvas.height;

const STATE = { MENU:0, PLAYING:1, GAMEOVER:2 };
let gameState = STATE.MENU;

let score = 0;
let phase = 1;

/* ========================= INPUT ========================= */

const input = { x: W/2, y: H-80, down:false };

canvas.addEventListener("mousemove", e=>{
  const r = canvas.getBoundingClientRect();
  input.x = (e.clientX - r.left) * (W / r.width);
  input.y = (e.clientY - r.top) * (H / r.height);
});
canvas.addEventListener("mousedown",()=>input.down=true);
canvas.addEventListener("mouseup",()=>input.down=false);

/* ========================= PLAYER ========================= */

const player = {
  x: W/2,
  y: H-60,
  size: 18,
  cooldown: 0,
  bullets: []
};

function shootPlayer(){
  player.bullets.push({ x:player.x, y:player.y-10, speed:7, r:3 });
}

/* ========================= ENEMIES ========================= */

const enemies = [];

function spawnEnemy(){
  enemies.push({
    x: Math.random()*(W-40)+20,
    y: -30,
    size: 14,
    life: 1,
    vy: 2
  });
}

/* ========================= UPDATE ========================= */

function update(){
  if(gameState !== STATE.PLAYING) return;

  // player
  player.x += (input.x - player.x) * 0.15;
  player.y += (input.y - player.y) * 0.15;
  player.cooldown--;

  if(input.down && player.cooldown<=0){
    shootPlayer();
    player.cooldown = 12;
  }

  // bullets
  for(let i=player.bullets.length-1;i>=0;i--){
    const b = player.bullets[i];
    b.y -= b.speed;
    if(b.y < -10) player.bullets.splice(i,1);
  }

  // enemies
  if(Math.random()<0.03) spawnEnemy();

  for(let i=enemies.length-1;i>=0;i--){
    const e = enemies[i];
    e.y += e.vy;

    if(e.y > H+20) enemies.splice(i,1);

    for(let j=player.bullets.length-1;j>=0;j--){
      const b = player.bullets[j];
      if(Math.hypot(b.x-e.x,b.y-e.y)<e.size){
        score+=10;
        enemies.splice(i,1);
        player.bullets.splice(j,1);
        break;
      }
    }
  }

  document.getElementById("score").textContent = score;
  document.getElementById("phase").textContent = phase;
}

/* ========================= DRAW ========================= */

function render(){
  ctx.fillStyle="#000";
  ctx.fillRect(0,0,W,H);

  if(gameState===STATE.PLAYING){
    // player
    ctx.fillStyle="#00e5ff";
    ctx.beginPath();
    ctx.moveTo(player.x,player.y-14);
    ctx.lineTo(player.x-12,player.y+12);
    ctx.lineTo(player.x+12,player.y+12);
    ctx.fill();

    // bullets
    player.bullets.forEach(b=>{
      ctx.beginPath();
      ctx.arc(b.x,b.y,b.r,0,Math.PI*2);
      ctx.fill();
    });

    // enemies
    enemies.forEach(e=>{
      ctx.fillStyle="#ffeb3b";
      ctx.beginPath();
      ctx.moveTo(e.x,e.y-e.size);
      ctx.lineTo(e.x-e.size,e.y+e.size);
      ctx.lineTo(e.x+e.size,e.y+e.size);
      ctx.fill();
    });
  }
}

/* ========================= LOOP ========================= */

function loop(){
  update();
  render();
  requestAnimationFrame(loop);
}
loop();

/* ========================= START ========================= */

document.getElementById("startBtn").onclick = ()=>{
  score=0;
  phase=1;
  enemies.length=0;
  player.bullets.length=0;
  gameState=STATE.PLAYING;
  document.getElementById("menu").style.display="none";
};
</script>

</body>
</html>
